<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Parle ou perd !</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

  <!-- Écran MENU principal -->
  <section id="screen-menu" class="screen">
    <h1>Parle ou perd !</h1>
    <p>Donne les bons ordres à voix haute</p>
    <button id="btn-menu-play">JOUER</button>
    <button id="btn-menu-options">OPTIONS</button>
    <button id="btn-menu-help">AIDE</button>
    <p>Record : <span id="menu-best-score">0</span> commande(s)</p>
  </section>

  <!-- Écran AIDE -->
  <section id="screen-help" class="screen" hidden>
    <h2>Aide</h2>
    <p>Dis SAUTE / BAISSE / GAUCHE / DROITE pour éviter les obstacles.</p>
    <button id="btn-help-back">RETOUR</button>
  </section>

  <!-- Écran OPTIONS -->
  <section id="screen-options" class="screen" hidden>
    <h2>Options</h2>
    <label>Volume : <input id="opt-volume" type="range" min="0" max="100" value="80" /></label>
    <label>Sensibilité micro :
      <select id="opt-mic-sens">
        <option value="low">Basse</option>
        <option value="medium" selected>Moyenne</option>
        <option value="high">Haute</option>
      </select>
    </label>
    <label><input id="opt-vibration" type="checkbox" checked /> Vibration</label>
    <button id="btn-reset-record">RAZ RECORD</button>
    <button id="btn-options-back">RETOUR</button>
  </section>

  <!-- Écran de JEU -->
  <section id="screen-game" class="screen" hidden>
    <div id="hud">
      <div>Score : <span id="hud-score">0</span></div>
      <div>Record : <span id="hud-best">0</span></div>
      <div>Série : <span id="hud-streak">0</span></div>
      <div id="hud-mic-status" title="Micro">●</div>
    </div>
    <div id="hud-last">Dernière commande : <span id="hud-last-spoken">–</span></div>
    <div id="game-area">(zone de jeu)</div>
  </section>

  <!-- Écran PAUSE -->
  <section id="screen-pause" class="screen" hidden>
    <h2>Pause</h2>
    <button id="btn-pause-resume">REPRENDRE</button>
    <button id="btn-pause-restart">REJOUER</button>
    <button id="btn-pause-menu">MENU</button>
  </section>

  <!-- Écran GAME OVER -->
  <section id="screen-gameover" class="screen" hidden>
    <h2>Fin de partie</h2>
    <div id="gameover-feedback"></div>
    <div>Score : <span id="gameover-score">0</span></div>
    <div>Record : <span id="gameover-best">0</span></div>
    <div>Meilleure série : <span id="gameover-best-streak">0</span></div>
    <div>Précision : <span id="gameover-accuracy">0 %</span></div>
    <div id="gameover-rewarded" hidden>
      <button id="btn-gameover-continue">CONTINUER (PUB)</button>
    </div>
    <button id="btn-gameover-restart">REJOUER</button>
    <button id="btn-gameover-menu">MENU</button>
  </section>

  <!-- Bannière PUB -->
  <div id="ad-banner-container" aria-hidden="true" style="display:none">
    <div id="ad-banner">BANNIÈRE PUB (debug)</div>
  </div>

  <!-- JS core -->
  <script src="js/config.js"></script>
  <script src="js/game.js"></script>
  <script src="js/voice.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/ads.js"></script>
  <script>
    (function () {
      function boot() {
        try {
          if (typeof initConfig === "function") initConfig();
          if (POP_Game?.initGame) POP_Game.initGame();
          if (POP_Voice?.initVoice) POP_Voice.initVoice();
          if (POP_UI?.initUI) POP_UI.initUI();
          if (POP_Ads?.initAds) POP_Ads.initAds();
        } catch (err) {
          console.error("Erreur init jeu :", err);
        }
      }
      if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", boot);
      else boot();
    })();
  </script>
</body>
</html>
